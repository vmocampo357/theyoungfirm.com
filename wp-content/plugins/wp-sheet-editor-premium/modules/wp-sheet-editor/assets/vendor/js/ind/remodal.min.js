!function(t,n){"function"==typeof define&&define.amd?define(["jquery"],function($){return n(t,$)}):"object"==typeof exports?n(t,require("jquery")):n(t,t.jQuery||t.Zepto)}(this,function(t,$){"use strict";var n,a,e,o="remodal",i=t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.NAMESPACE||o,s=$.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(t){return t+"."+i}).join(" "),r=$.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(t){return t+"."+i}).join(" "),d=$.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:""},t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.DEFAULTS),c={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},l="confirmation",m="cancellation",p=void 0!==(n=document.createElement("div").style).animationName||void 0!==n.WebkitAnimationName||void 0!==n.MozAnimationName||void 0!==n.msAnimationName||void 0!==n.OAnimationName,u=/iPad|iPhone|iPod/.test(navigator.platform);function f(t){if(p&&"none"===t.css("animation-name")&&"none"===t.css("-webkit-animation-name")&&"none"===t.css("-moz-animation-name")&&"none"===t.css("-o-animation-name")&&"none"===t.css("-ms-animation-name"))return 0;var n,e,a,i,o=t.css("animation-duration")||t.css("-webkit-animation-duration")||t.css("-moz-animation-duration")||t.css("-o-animation-duration")||t.css("-ms-animation-duration")||"0s",s=t.css("animation-delay")||t.css("-webkit-animation-delay")||t.css("-moz-animation-delay")||t.css("-o-animation-delay")||t.css("-ms-animation-delay")||"0s",r=t.css("animation-iteration-count")||t.css("-webkit-animation-iteration-count")||t.css("-moz-animation-iteration-count")||t.css("-o-animation-iteration-count")||t.css("-ms-animation-iteration-count")||"1";for(o=o.split(", "),s=s.split(", "),r=r.split(", "),i=0,e=o.length,n=Number.NEGATIVE_INFINITY;i<e;i++)n<(a=parseFloat(o[i])*parseInt(r[i],10)+parseFloat(s[i]))&&(n=a);return n}function h(){if($(document.body).height()<=$(window).height())return 0;var t,n,e=document.createElement("div"),a=document.createElement("div");return e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e),t=e.offsetWidth,e.style.overflow="scroll",a.style.width="100%",e.appendChild(a),n=a.offsetWidth,e.parentNode.removeChild(e),t-n}function g(){if(!u){var t,n,e=$("html"),a=O("is-locked");e.hasClass(a)&&(n=$(document.body),t=parseInt(n.css("padding-right"),10)-h(),n.css("padding-right",t+"px"),e.removeClass(a))}}function v(t,n,e,a){var i=O("is",n),o=[O("is",c.CLOSING),O("is",c.OPENING),O("is",c.CLOSED),O("is",c.OPENED)].join(" ");t.$bg.removeClass(o).addClass(i),t.$overlay.removeClass(o).addClass(i),t.$wrapper.removeClass(o).addClass(i),t.$modal.removeClass(o).addClass(i),t.state=n,!e&&t.$modal.trigger({type:n,reason:a},[{reason:a}])}function C(t,n,e){var a=0,i=function(t){t.target===this&&a++},o=function(t){t.target===this&&0==--a&&($.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){e[n].off(s+" "+r)}),n())};$.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){e[n].on(s,i).on(r,o)}),t(),0===f(e.$bg)&&0===f(e.$overlay)&&0===f(e.$wrapper)&&0===f(e.$modal)&&($.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){e[n].off(s+" "+r)}),n())}function y(e){e.state!==c.CLOSED&&($.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){e[n].off(s+" "+r)}),e.$bg.removeClass(e.settings.modifier),e.$overlay.removeClass(e.settings.modifier).hide(),e.$wrapper.hide(),g(),v(e,c.CLOSED,!0))}function O(){for(var t=i,n=0;n<arguments.length;++n)t+="-"+arguments[n];return t}function E(){var t,n,e=location.hash.replace("#","");if(e){try{n=$("[data-"+o+'-id="'+e+'"]')}catch(t){}n&&n.length&&(t=$[o].lookup[n.data(o)])&&t.settings.hashTracking&&t.open()}else a&&a.state===c.OPENED&&a.settings.hashTracking&&a.close()}function w(t,n){var e=$(document.body),a=this;a.settings=$.extend({},d,n),a.index=$[o].lookup.push(a)-1,a.state=c.CLOSED,a.$overlay=$("."+O("overlay")),a.$overlay.length||(a.$overlay=$("<div>").addClass(O("overlay")+" "+O("is",c.CLOSED)).hide(),e.append(a.$overlay)),a.$bg=$("."+O("bg")).addClass(O("is",c.CLOSED)),a.$modal=t.addClass(i+" "+O("is-initialized")+" "+a.settings.modifier+" "+O("is",c.CLOSED)).attr("tabindex","-1"),a.$wrapper=$("<div>").addClass(O("wrapper")+" "+a.settings.modifier+" "+O("is",c.CLOSED)).hide().append(a.$modal),e.append(a.$wrapper),a.$wrapper.on("click."+i,"[data-"+o+'-action="close"]',function(t){t.preventDefault(),a.close()}),a.$wrapper.on("click."+i,"[data-"+o+'-action="cancel"]',function(t){t.preventDefault(),a.$modal.trigger(m),a.settings.closeOnCancel&&a.close(m)}),a.$wrapper.on("click."+i,"[data-"+o+'-action="confirm"]',function(t){t.preventDefault(),a.$modal.trigger(l),a.settings.closeOnConfirm&&a.close(l)}),a.$wrapper.on("click."+i,function(t){$(t.target).hasClass(O("wrapper"))&&a.settings.closeOnOutsideClick&&a.close()})}w.prototype.open=function(){var t,n=this;n.state!==c.OPENING&&n.state!==c.CLOSING&&((t=n.$modal.attr("data-"+o+"-id"))&&n.settings.hashTracking&&(e=$(window).scrollTop(),location.hash=t),a&&a!==n&&y(a),a=n,function(){if(!u){var t,n,e=$("html"),a=O("is-locked");e.hasClass(a)||(n=$(document.body),t=parseInt(n.css("padding-right"),10)+h(),n.css("padding-right",t+"px"),e.addClass(a))}}(),n.$bg.addClass(n.settings.modifier),n.$overlay.addClass(n.settings.modifier).show(),n.$wrapper.show().scrollTop(0),n.$modal.focus(),C(function(){v(n,c.OPENING)},function(){v(n,c.OPENED)},n))},w.prototype.close=function(t){var n=this;n.state!==c.OPENING&&n.state!==c.CLOSING&&(n.settings.hashTracking&&n.$modal.attr("data-"+o+"-id")===location.hash.substr(1)&&(location.hash="",$(window).scrollTop(e)),C(function(){v(n,c.CLOSING,!1,t)},function(){n.$bg.removeClass(n.settings.modifier),n.$overlay.removeClass(n.settings.modifier).hide(),n.$wrapper.hide(),g(),v(n,c.CLOSED,!1,t)},n))},w.prototype.getState=function(){return this.state},w.prototype.destroy=function(){var t=$[o].lookup;y(this),this.$wrapper.remove(),delete t[this.index],0===$.grep(t,function(t){return!!t}).length&&(this.$overlay.remove(),this.$bg.removeClass(O("is",c.CLOSING)+" "+O("is",c.OPENING)+" "+O("is",c.CLOSED)+" "+O("is",c.OPENED)))},$[o]={lookup:[]},$.fn[o]=function(e){var a,i;return this.each(function(t,n){null==(i=$(n)).data(o)?(a=new w(i,e),i.data(o,a.index),a.settings.hashTracking&&i.attr("data-"+o+"-id")===location.hash.substr(1)&&a.open()):a=$[o].lookup[i.data(o)]}),a},$(document).ready(function(){$(document).on("click","[data-"+o+"-target]",function(t){t.preventDefault();var n=t.currentTarget.getAttribute("data-"+o+"-target"),e=$("[data-"+o+'-id="'+n+'"]');$[o].lookup[e.data(o)].open()}),$(document).find("."+i).each(function(t,n){var e=$(n),a=e.data(o+"-options");a?("string"==typeof a||a instanceof String)&&(a=function(t){var n,e,a,i,o={};for(i=0,e=(n=(t=t.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",")).split(",")).length;i<e;i++)n[i]=n[i].split(":"),("string"==typeof(a=n[i][1])||a instanceof String)&&(a="true"===a||"false"!==a&&a),("string"==typeof a||a instanceof String)&&(a=isNaN(a)?a:+a),o[n[i][0]]=a;return o}(a)):a={},e[o](a)}),$(document).on("keydown."+i,function(t){a&&a.settings.closeOnEscape&&a.state===c.OPENED&&27===t.keyCode&&a.close()}),$(window).on("hashchange."+i,E)})});